# 자료형

## 자바는 어떤 자료형을 제공할까

### 원시 자료형

#### 정수형 자료형

byte는 1바이트 크기의 자료형이다. -128부터 127까지의 범위를 가진다.
short는 2바이트 크기의 자료형이다. -32,768부터 32,767까지의 범위를 가진다.
int는 4바이트 크기의 자료형이다. -2,147,483,648부터 2,147,483,647까지의 범위를 가지며, 자바의 기본 정수형이다.
long은 8바이트 크기의 자료형이다. -9,223,372,036,854,775,808부터 9,223,372,036,854,775,807까지의 범위를 가진다.

#### 실수형 자료형

float는 4바이트 크기의 자료형이다. 4바이트 실수를 표현한다.
double은 8바이트 크기의 자료형이다. 8바이트 실수를 표현하며, 자바의 기본 실수형이다.

#### 기타 자료형

boolean은 1비트 크기의 자료형이다. 참 또는 거짓 값을 저장한다.
char는 2바이트 크기의 자료형이다. 단일 문자를 저장한다.

#### 메모리 할당 특징

원시형은 메모리 특정 영역에 해당 크기만큼 바이트를 할당한다. 예를 들어 int형은 4바이트를 할당하고, 그곳에 값을 2진수 형태로 저장한다.
C언어는 동일한 정수형이라도 크기나 부호에 따라 매우 다양한 원시형을 제공한다. 이는 정확한 메모리 사용과 효율적인 프로그래밍을 위해서이다.


### 참조 자료형

참조형은 원시형이 아닌 자료형을 말한다.
원시형은 자바 메모리 모델에서 훨씬 더 빠른 영역에 할당된다. 반면 참조형은 좀 더 느린 영역에 할당된다.
원시형은 자료형에 따라 크기가 제각각이며, 자료형 크기만큼의 메모리만 할당된다. 반면 참조형은 일정한 크기의 메모리가 할당된다. 대신 크기가 훨씬 더 크다.

참조형은 메소드 호출을 통해 여러 편리한 작업을 수행할 수 있다.
원시형은 항상 값이 존재해야 하며, 널이 될 수 없다. 반면 참조형은 널이 될 수 있다.
컬렉션의 엘리먼트는 참조형만 가능하다.

원시형을 선언하는 키워드는 소문자로 시작하며, 참조형은 대문자로 시작한다.

원시형이 자바에서 미리 정의한 가장 기본적인 자료형이라면, 참조형은 별도로 정의하여 부가 기능을 제공하는 편리한 자료형이라 할 수 있다. 편리하다면 그냥 참조형만 쓰면 되는 것 아닌가라고 생각할 수 있지만 원시형을 쓰면 사용하는 메모리의 영역이 다르고, 필요한 최소한의 공간만을 이용하여, 매우 빠른 연산이 가능하다. 즉 원시형은 쓰기에 다소 불편해도 공간과 속도를 최적화할 수 있도록 특히 자바는 C와 달리 원시형에 1:1 대응하는 참조형도 제공한다. 그 자체가 클래스 객체이며 원시형을 감싸고 있다고 하여 래퍼 클래스Wrapper Class라고도 한다. 자바의 원시형과 이에 대응하는 참조형은 표 4-2와 같다.
참조형 Integer는 실제로는 java.lang.Integer 클래스이며, 기존 자바에서 하던 방식과 동일하게 클래스 객체로 선언하면 기존에 원시형으로는 할 수 없었던 여러 가지 작업을 할 수 있게 된다. 참조형일 때도 불구하고 원시형처럼 단순히 값을 대입하는 것도 가능하며, 오히려 권장된다. 오토박싱Auto Boxing 자바에서 원시형과 참조형을 자동으로 변환해주는 기능으로 9장에서 자세히 설명했다는 도움을 받아 자동으로 참조형으로 변환해주기 때문이다. 이렇게 참조형으로 선언하면, 단순히 메모리에 값만 보관하고 있는 때는 하지 못했던 여러 가지 일을 할 수 있다.

참조형은 클래스 객체이므로 여러 메타 정보와 함께 다양한 메소드를 제공할 수 있기 때문이다. 대표적으로, 정수형을 문자형으로 변환한다든지, 실수 같은 자료형으로 변환한다든지 하는 작업을 바로 지원할 수 있도록 클래스 객체에 모두 포함하고 있다.

### 원시 자료형과 참조 자료형의 속도 비교

#### Integer[] 배열 생성 및 값 찾기 테스트
- Integer[] 1억 개 삽입에 걸린 시간: 847밀리초
- Integer[] 1억 개 중 찾기에 걸린 시간: 40밀리초

#### int[] 배열 생성 및 값 찾기 테스트
- int[] 1억 개 삽입에 걸린 시간: 128밀리초
- int[] 1억 개 중 찾기에 걸린 시간: 26밀리초

원시형에 비해 참조형의 삽입은 6.6배 더 걸리고, 찾기는 1.5배 더 걸린다. 완전히 동일한 코드인데 원시형을 사용하느냐 참조형을 사용하느냐에 따라 이렇게 실행 속도에 많은 차이가 나는 것이다.

원시형은 필요한 최소한의 공간만을 이용하여, 매우 빠른 연산이 가능하다. 반면 참조형은 여러 편리한 기능을 제공하기 때문에 경우에 따라서는 참조형을 훨씬 더 많이 활용할 수 있다.

## 자바 컬렉션 프레임워크의 등장

빠른 속도를 위해서는 원시형, 편리한 기능을 위해서는 참조형을 사용한다는 점을 살펴봤다. 그렇다면 복수 개의 값을 처리하려면 어떤 자료형을 사용하면 될까? 가장 먼저 떠오르는 건 배열이다. 실제로 배열은 복수 개의 자료를 처리하는 데 널리 사용된다. 하지만 정적 배열은 사용에 제약이 따르고 무엇보다 크기를 미리 구해야 하고 알고리즘을 미리 구현해야 한다는 점이 있다. 배열의 기능을 뛰어넘어, 자유로운 삽입과 삭제가 가능하면서 크기에 신경 쓸 필요가 없으며 여러 가지 편리한 부가 기능을 함께 제공하는 목록형이 있다면 매우 편리하다.

자바 1.2 버전에 이르러 드디어 자바 컬렉션 프레임워크Java Collections Framework라는 이름으로 컬렉션 자료구조를 구현한 공식 라이브러리가 포함됐다.

* 주요 이점

1. 일관성 있는 API: 동일한 기능을 하는 자료형은 공통 인터페이스를 제공한다. 예를 들어, List나 Set 모두 엘리먼트를 삽입하는 메소드는 add()로 동일하다. 공통 표준을 제공하여 학습 비용을 줄이고 호환성을 높인다.
2. 개발 비용 절약: 필수 데이터 구조와 알고리즘을 미리 구현하여 제공하므로 개발자가 일일이 알고리즘을 구현할 필요가 없다.
3. 고성능 구현 제공: 잘 만든 고성능 구현을 제공하므로 개발자가 직접 개발할지라도 이보다 더 잘 만들기는 어렵다.
4. 재사용 기능: 공통 표준을 제공하므로 재사용이 가능하다. 한 예로 자바 5 버전(2004년)에 작성한 리스트 예제를 지금도 동일하게 사용할 수 있다. 물론 최신 문법을 적용하면 좀 더 우아하게 개선할 수 있겠지만, 기본적으로 20여 년 전에 작성한 코드도 계속해서 재사용이 가능하다.

* 주요 인터페이스별 특징
1. List :아마도 가장 자주 접하게 될 인터페이스로, 초기에는 명칭을 시퀀스Sequence로 하자는 의견이 있을 정도였다(많은 이들이 선택되어 List로 결정). 말 그대로 순서대로 엘리먼트를 모아두는 목록집이다. 배열에 순서대로 쌓는 것과 비슷하며, 가장 자주 사용하게 될 대표적인 목록형 자료형이다.
2. Set : List와 유사하지만 중복을 허용하지 않는다.
3. Queue : 큐 자료구조 인터페이스다(자세한 내용은 9장에서 소개하겠다).
4. Deque : 양쪽에서 삽입과 삭제를 처리할 수 있는 스택과 큐의 특징을 모두 갖고 있는 인터페이스로 Queue를 확장해 정의되어 있다(자세한 내용은 10장에서 소개하겠다).
5. Map : Collection을 확장하지 않고 별도로 구현되어 있다. 별도로 구현되는 만큼 List, Set과는 조금 다르게 동작하며 매소드 명칭도 조금씩 다르다. Collection을 확장한 List, Set, Queue 등은 모두 없으므로만 구성된 자료형이지만 Map은 키/값을 함께 갖는 자료형이라는 차이가 있다.

* 컬렉션 인터페이스의 계층 구조

1. Collection 인터페이스: 최상위 인터페이스
2. List: 순서가 있고 중복을 허용하는 컬렉션
3. Set: 중복을 허용하지 않는 컬렉션
4. Queue: FIFO(First In First Out) 방식의 컬렉션
5. Deque: 양방향 큐 인터페이스
6. Map 인터페이스: Collection과 별개로 정의된 키-값 쌍을 저장하는 인터페이스

### 가장 유용하게 쓰게될 맵

* HashMap : 기본적인 해시 테이블 구조의 자료형으로, 맵이 필요한 경우 대부분 HashMap 자료형을 사용한다. 단, 입력 순서를 보장하지 않는다는 점에 주의해야 하며, 원래 해시 테이블 자료구조는 기본적으로 입력 순서에 관여하지 않는다.
* LinkedHashMap : 이 LinkedHashMap 자료형을 사용하면 입력 순서가 유지된다. 참고로 파이썬의 경우도 원래 맵 자료형은 입력 순서가 유지되지 않았으나 3.6 버전부터 유지된다.
* TreeMap : 이 자료형은 값에 따라 순서를 정렬한다. 내부적으로 자가 균형 이진 탐색 트리인 레드-블랙 트리(14장 참고)로 구현되어 있으며, 정렬 순서도 임의로 지정할 수 있다. 특정 조건에 따라 정렬된 상태가 필요하다면 이 자료형을 사용하면 된다.
* Hashtable : 자바 초기에 추가된 자료형으로, 지금은 더 이상 쓰이지 않는다

